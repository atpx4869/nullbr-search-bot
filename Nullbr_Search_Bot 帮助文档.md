# Nullbr Bot 用户使用指南

欢迎使用 Nullbr Bot！这是一个功能强大的 Telegram 机器人，帮助你快速搜索影视资源和 115 网盘分享链接。

## 目录

- [快速开始](#快速开始)
- [搜索影视](#搜索影视)
- [NSFW 内容搜索](#nsfw-内容搜索)
- [Inline 搜索](#inline-搜索)
- [投稿 115 链接](#投稿-115-链接)
- [绑定 API Key](#绑定-api-key)
- [群组管理](#群组管理)
- [常见问题](#常见问题)

---

## 快速开始

### 1. 找到机器人

在 Telegram 中搜索 `@nullbr_search_bot` 或点击链接：https://t.me/nullbr_search_bot

### 2. 启动机器人

发送 `/start` 命令，机器人会显示欢迎信息和使用说明。

### 3. 开始搜索

- 发送 `/s 复仇者联盟` 搜索影视
- 或使用 Inline 模式：在任意聊天中输入 `@nullbr_search_bot 复仇者联盟`

---

## 搜索影视

### 基本搜索 `/s`

按关键字搜索电影、电视剧、人物。

**格式：**
```
/s <关键字>
/s <关键字> <年份>
```

**示例：**

| 命令 | 说明 |
|------|------|
| `/s 复仇者联盟` | 搜索"复仇者联盟"相关影视 |
| `/s 蜘蛛侠 2021` | 搜索 2021 年的"蜘蛛侠" |
| `/s Avengers` | 支持英文搜索 |
| `/s 周星驰` | 搜索人物 |

**搜索结果：**
- 如果只有一个匹配结果，直接显示详情（海报、简介、演员、链接）
- 如果有多个匹配结果，显示列表供你选择

### 精确搜索 `/sid`

当有多个同名影视时，使用 TMDB ID 精确搜索。

**格式：**
```
/sid <tmdbid>
/sid <类型> <tmdbid>
```

**类型说明：**
- `movie` - 电影（默认）
- `tv` - 电视剧
- `person` - 人物
- `collection` - 电影系列/合集

**示例：**

| 命令 | 说明 |
|------|------|
| `/sid 299536` | 搜索 TMDB ID 为 299536 的电影 |
| `/sid movie 299536` | 同上，明确指定类型为电影 |
| `/sid tv 1399` | 搜索 TMDB ID 为 1399 的电视剧（权力的游戏） |
| `/sid person 17419` | 搜索 TMDB ID 为 17419 的人物（布莱恩·克兰斯顿） |
| `/sid collection 86311` | 搜索复仇者联盟系列合集 |

**如何获取 TMDB ID：**
1. 访问 [TMDB 官网](https://www.themoviedb.org/)
2. 搜索影视
3. 在 URL 中找到 ID，如 `https://www.themoviedb.org/movie/299536` 中的 `299536`

---

## NSFW 内容搜索

### 搜索 NSFW `/av`

搜索 NSFW 内容（番号、演员、标题）。

**格式：**
```
/av <关键字>
```

**示例：**

番号搜索（推荐）：
| 命令 | 说明 |
|------|------|
| `/av MIDV-766` | 标准番号格式 |
| `/av 123121_01` | 数字番号格式 |
| `/av 10MUSUME-123121_01` | 带前缀的番号 |

演员/标题搜索：
| 命令 | 说明 |
|------|------|
| `/av 三上悠亜` | 按演员名搜索 |
| `/av 慟哭の女教師` | 按标题搜索 |

⚠️ **注意：** 演员名和标题目前仅支持日文，请使用日文字符：
- ❌ `/av 三上悠亚` → ✅ `/av 三上悠亜`
- ❌ `/av 慟哭的女教師` → ✅ `/av 慟哭の女教師`

**搜索结果：**
- 单个结果或无精确匹配：直接显示详情
- 多个结果且有精确匹配：显示列表供选择

**详情包含：**
- 番号、标题、发行日期、评分、时长
- 演员、类型、制作商
- 磁力资源（需绑定 API Key）

### 按 ID 查询 `/avid`

使用搜索结果中的 ID 查询详情。

**格式：**
```
/avid <分类> <id>
```

**分类说明：**
- `dmm` - DMM/Fanza 作品
- `fc2` - FC2-PPV 作品
- `madouqu` - 麻豆区作品

**示例：**

| 命令 | 说明 |
|------|------|
| `/avid dmm midv00766` | 查询 DMM 作品详情 |
| `/avid fc2 1234567` | 查询 FC2 作品详情 |

---

## Inline 搜索

Inline 搜索是最便捷的搜索方式，可以在任意聊天中使用。

### 使用方法

在任意聊天的输入框中输入：
```
@nullbr_search_bot <关键字>
```

### 影视搜索

```
@nullbr_search_bot 复仇者联盟
@nullbr_search_bot 权力的游戏
```

输入后会显示搜索结果列表，点击即可发送到当前聊天。

### NSFW 搜索

在关键字前加 `av ` 前缀：
```
@nullbr_search_bot av MIDV-766
@nullbr_search_bot av 三上悠亜
```

### 热门推荐

不输入关键字，直接输入 `@nullbr_search_bot` 会显示热门影视推荐。

### 绑定 API Key 的好处

绑定 API Key 后，Inline 搜索结果会：
- 直接显示 115 分享链接
- NSFW 搜索显示磁力资源

---

## 投稿 115 链接

### 投稿链接 `/add`

将 115 分享链接投稿到数据库。

**格式：**
```
/add <115链接>
```

**示例：**
```
/add https://115.com/s/sw6xxxxx?password=xxxx
```

**支持的链接格式：**
- `https://115.com/s/xxxxx?password=xxxx`
- `https://115cdn.com/s/xxxxx?password=xxxx`
- `https://anxia.com/s/xxxxx?password=xxxx`

**批量投稿：**
```
/add https://115.com/s/sw6xxxxx?password=xxxx https://115.com/s/sw7xxxxx?password=yyyy
```

**私聊自动投稿：**
在私聊中直接发送 115 链接（无需 `/add` 命令），机器人会自动识别并投稿。

### 搜索投稿 `/ss`

搜索已投稿的 115 分享内容。

**格式：**
```
/ss <关键字>
```

**示例：**

| 命令 | 说明 |
|------|------|
| `/ss 复仇者联盟` | 搜索包含"复仇者联盟"的投稿 |
| `/ss 4K` | 搜索包含"4K"的投稿 |

---

## 绑定 API Key

绑定 API Key 后，搜索结果会直接显示 115 分享链接和磁力资源。

### 获取 API Key

1. 访问 [nullbr.com/manage](https://nullbr.com/manage)
2. 登录你的账号
3. 在管理页面找到 API Key

### 绑定命令 `/set_key`

**重要：请在私聊中使用此命令，保护你的 API Key 安全！**

**格式：**
```
/set_key <your_api_key>
```

**示例：**
```
/set_key abc123def456
```

**绑定成功后：**
- 搜索结果直接显示 115 链接
- Inline 搜索结果带有资源按钮
- NSFW 搜索显示磁力资源

**注意事项：**
- 每个 API Key 只能绑定一个 Telegram 账号
- 请勿在群组中使用此命令
- 如需更换 API Key，重新执行命令即可

---

## 群组管理

以下命令仅群组管理员可用。

### 分享开关 `/set_sharing`

控制群组内是否允许投稿 115 链接。

**格式：**
```
/set_sharing on   # 开启分享功能
/set_sharing off  # 关闭分享功能
```

### 自动投稿 `/set_auto`

开启后，群组内发送的 115 链接会自动投稿。

**格式：**
```
/set_auto on   # 开启自动投稿
/set_auto off  # 关闭自动投稿
```

### 自动删除 `/set_del`

控制机器人消息是否自动删除（保持群组整洁）。

**格式：**
```
/set_del on   # 开启自动删除
/set_del off  # 关闭自动删除
```

**默认设置：**
- 分享功能：开启
- 自动投稿：关闭
- 自动删除：开启

---

## 其他命令

### 帮助 `/help`

显示完整的命令帮助信息。

### 版本 `/version`

显示机器人版本和更新日志。

---

## 常见问题

### Q: 搜索没有结果怎么办？

**A:** 
1. 检查关键字是否正确
2. 尝试使用英文名或原名搜索
3. 使用年份缩小范围：`/s 蜘蛛侠 2021`
4. 如果是新上映的影视，可能还未收录

### Q: 为什么搜索结果没有 115 链接？

**A:** 
1. 该影视可能没有 115 资源
2. 你还没有绑定 API Key，请私聊机器人使用 `/set_key` 绑定

### Q: 如何获取 TMDB ID？

**A:** 
1. 访问 [TMDB 官网](https://www.themoviedb.org/)
2. 搜索影视
3. 在 URL 中找到数字 ID

### Q: 群组内消息为什么会自动删除？

**A:** 
这是为了保持群组整洁。管理员可以使用 `/set_del off` 关闭此功能。

### Q: API Key 绑定失败怎么办？

**A:** 
1. 确保在私聊中使用命令
2. 检查 API Key 是否正确（无多余空格）
3. 确认 API Key 未被其他账号绑定

### Q: NSFW 搜索没有磁力资源？

**A:** 
1. 需要绑定 API Key
2. 确保你的账号有 NSFW 权限
3. 部分作品可能暂无磁力资源

### Q: Inline 搜索没有反应？

**A:** 
1. 确保输入格式正确：`@nullbr_search_bot 关键字`
2. 等待 1-2 秒让结果加载
3. 检查网络连接

---

## 联系我们

如有问题或建议，欢迎：
- 加入[官方群组](https://t.me/+dmhrcRblNe45Mzk1)
- 访问 [官网](https://nullbr.com)

---

## 命令速查表

| 命令 | 说明 | 示例 |
|------|------|------|
| `/start` | 启动机器人 | `/start` |
| `/help` | 显示帮助 | `/help` |
| `/version` | 显示版本 | `/version` |
| `/s` | 搜索影视 | `/s 复仇者联盟` |
| `/sid` | 按 ID 搜索 | `/sid movie 299536` |
| `/av` | 搜索 NSFW | `/av MIDV-766` |
| `/avid` | NSFW 详情 | `/avid dmm midv00766` |
| `/add` | 投稿链接 | `/add https://115.com/s/...` |
| `/ss` | 搜索投稿 | `/ss 高清剧集网` |
| `/set_key` | 绑定 API Key | `/set_key abc123` |
| `/set_sharing` | 分享开关 | `/set_sharing on` |
| `/set_auto` | 自动投稿 | `/set_auto on` |
| `/set_del` | 自动删除 | `/set_del off` |

**Inline 搜索：**
- 影视：`@nullbr_search_bot 关键字`
- NSFW：`@nullbr_search_bot av 关键字`
